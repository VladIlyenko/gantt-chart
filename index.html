<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gantt Chart Viewer</title>
  <script src="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js"></script>
  <link href="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    #gantt_here {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="gantt_here"></div>

  <script>
  gantt.config.xml_date = "%d-%m-%Y";
  gantt.config.work_time = true;
  gantt.config.skip_off_time = true;
  gantt.setWorkTime({ day: 0, hours: false }); // Sunday
  gantt.setWorkTime({ day: 6, hours: false }); // Saturday
  gantt.config.duration_unit = "day";

  gantt.config.lightbox.sections = [
    { name: "description", height: 40, map_to: "text", type: "textarea" },
    { name: "assignee", height: 30, map_to: "assignee", type: "textarea" },
    { name: "task_type", height: 30, map_to: "task_type", type: "textarea" },
    { name: "tool", height: 30, map_to: "tool", type: "textarea" },
    { name: "time", type: "duration", map_to: "auto" }
  ];

  gantt.init("gantt_here");

  fetch("https://script.google.com/macros/s/AKfycbx9GX4wt4OoDHXYq-tFSJfW3O16Sg-qTi3l8LMFC_6KKDQ8XXC4L-y87UQDnkbetgmPww/exec")
    .then(res => res.json())
    .then(tasks => {
      console.log("Loaded tasks", tasks);
      gantt.parse({ data: tasks });
    })
    .catch(err => console.error("Failed to load tasks:", err));
</script>

</body>
</html>
